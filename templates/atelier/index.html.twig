{% extends 'base.html.twig' %}

{% block title %}Hello ArticleController!{% endblock %}

{% block body %}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

<!-- search area -->
	<div class="search-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<span class="close-btn"><i class="fas fa-window-close"></i></span>
					<div class="search-bar">
						<div class="search-bar-tablecell">
							<h3>Search For:</h3>
							<input type="text" placeholder="Keywords">
							<button type="submit">Search <i class="fas fa-search"></i></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end search arewa -->
	
	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						     <p>Explore our latest workshops and join us for an exciting experience!</p>

						<h1>News Workshop</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

	<!-- latest news -->
<div class="latest-news mt-150 mb-150">
    <div class="container">
        <div class="row">
            {% for workshop in workshops %}
                <div class="col-lg-4 col-md-6">
                    <div class="single-latest-news">
                        <a href="{{ path('workshop_detail', {'id': workshop.id}) }}">
                            <div class="latest-news-bg" style="background-image: url('{{ asset(workshop.image) }}');"></div>
                        </a>
                        <div class="news-text-box">
                            <h3><a href="{{ path('workshop_detail', {'id': workshop.id}) }}">{{ workshop.title }}</a></h3>
							 <h3>{{ workshop.date|date('Y-m-d H:i') }}</h3>

                            <p class="blog-meta">
                                <span class="type"><i class="fas fa-tag"></i> {{ workshop.type }}</span>
                                <span class="location"><i class="fas fa-map-marker-alt"></i> {{ workshop.location }}</span>
                            </p>
                            <p class="excerpt">  {{ workshop.description|slice(0, 100) ~'...'}}</p>
						
  

														
<a href="{{ path('workshop_details', {'id': workshop.id}) }}" class="read-more-btn">
    Register Now<i class="fas fa-angle-right"></i>
</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
			<div class="row">
				<div class="container">
					<div class="row">
						<div class="col-lg-12 text-center">
							<div class="pagination-wrap">
								<ul>
									<li><a href="#">Prev</a></li>
									<li><a href="#">1</a></li>
									<li><a class="active" href="#">2</a></li>
									<li><a href="#">3</a></li>
									<li><a href="#">Next</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end latest news -->

	<div style="display: flex; justify-content: center; align-items: center; height: 100vh;">
    <div id="map" style="width: 1300px; height: 500px; border-radius: 15px; box-shadow: 0 7px 14px rgba(53, 124, 179, 0.1);"></div>
</div>
				
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
    window.onload = function() {
        // Initialize the map and set the initial view (adjust as needed)
        var map = L.map('map').setView([36.8065, 10.1815], 6); // Default center (e.g., Tunisia)

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Get workshop data from Symfony (passing workshopData)
        var workshops = {{ workshopData|json_encode()|raw }};

        // Loop through workshops and add markers
        workshops.forEach(function(workshopmap) {
            if (workshopmap.latitude && workshopmap.longitude) {
                // Add markers to the map using latitude and longitude from the database
                L.marker([workshopmap.latitude, workshopmap.longitude]).addTo(map)
                    .bindPopup(`<b>${workshopmap.name}</b>`);
            }
        });
    }
</script>


	<!-- logo carousel -->
	<div class="logo-carousel-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="logo-carousel-inner">
						<div class="single-logo-item">
							<img src="assets/img/company-logos/1.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/2.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/3.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/4.png" alt="">
						</div>
						<div class="single-logo-item">
							<img src="assets/img/company-logos/5.png" alt="">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end logo carousel -->

{% endblock %}
